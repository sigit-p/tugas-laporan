<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="page-title">Dashboard Pembelajaran</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>        
        body { font-family: 'Source Sans Pro', sans-serif; background-color: #f4f6f9; }
        .navbar-custom { background: #3c8dbc; border-bottom: 3px solid #367fa9; }
        .content-header { background: #fff; padding: 20px 0; border-bottom: 1px solid #dee2e6; margin-bottom: 20px; }
        .card { border: none; border-radius: 8px; box-shadow: 0 0 1px rgba(0,0,0,.125),0 1px 3px rgba(0,0,0,.2); }
        .card-header { background-color: #fff; border-bottom: 1px solid rgba(0,0,0,.125); font-weight: bold; }
        
        /* Table Styling */
        .table-responsive { border-radius: 8px; overflow: hidden; }
        .table thead th { background-color: #f4f6f9; border-top: 0; }
        .badge-belum { background-color: #dc3545; color: white; padding: 4px 8px; border-radius: 4px; cursor: pointer; }
        .final-score { background-color: #e7f3ff; font-weight: bold; color: #007bff; }
        
        /* Search Box */
        .search-area { max-width: 400px; margin-bottom: 20px; }
        
        footer { background: #fff; padding: 15px 0; border-top: 1px solid #dee2e6; margin-top: 40px; }

        /* Pastikan pembungkus tabel bisa di-scroll secara horizontal */
.table-responsive {
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch; /* Biar geser di iPhone lebih halus */
    margin-bottom: 1rem;
}

/* Memaksa lebar kolom agar tidak berdesakan */
#nilaiTable th, #nilaiTable td {
    white-space: nowrap; /* Teks tidak akan turun ke bawah, sehingga kolom melebar */
    padding: 10px 15px;
    min-width: 80px;     /* Lebar minimal kolom Job */
}

#nilaiTable th:first-child, #nilaiTable td:first-child {
    min-width: 180px;    /* Kolom Nama Siswa dibuat lebih lebar */
    position: sticky;    /* Opsi: Nama siswa tetap diam saat digeser (opsional) */
    left: 0;
    z-index: 2;
    background-color: #fff;
}
    </style>
</head>
<body>

<nav class="navbar navbar-dark navbar-custom shadow-sm">
    <div class="container">
        <a class="navbar-brand" href="index.html"><i class="fas fa-graduation-cap me-2"></i> <b>PORTAL</b> SISWA</a>
<a href="select_feature.html" id="back-link-nav" class="btn btn-sm btn-light text-primary fw-bold">
    <i class="fas fa-arrow-left"></i> Kembali
</a>
    </div>
</nav>

<div class="content-header shadow-sm">
    <div class="container">
        <h2 id="main-header" class="mb-1">Memuat Konten...</h2>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a href="index.html" style="text-decoration:none;">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Dashboard</li>
            </ol>
        </nav>
    </div>
</div>

<main class="container">
    
    <div id="content-nilai" class="feature-content">
        <div class="card">
            <div class="card-header"><i class="fas fa-poll me-2 text-primary"></i> Rekap Nilai dan Laporan Praktik</div>
            <div class="card-body">
                
                <div class="alert alert-info py-2 small">
                    <i class="fas fa-info-circle me-1"></i> 
                    ðŸ’¡ Geser tabel ke kanan jika terpotong. Klik pada <span class="badge bg-danger"># job</span> untuk daftar tugas belum kumpul.
                </div>

                <div class="search-area">
                    <div class="input-group">
                        <span class="input-group-text bg-white"><i class="fas fa-search text-muted"></i></span>
                        <input id="searchBox" type="text" class="form-control border-start-0" placeholder="Cari nama siswa...">
                    </div>
                </div>

                <div id="jobNoteContainer"></div>

                <div class="table-responsive">
                    <table id="nilaiTable" class="table table-hover table-bordered align-middle">
                        <thead>
                            <tr class="text-center small text-uppercase fw-bold">
                                <th>Nama</th>
                                <th>Job 1</th> <th>Job 2</th> <th>Job 3</th> <th>Job 4</th>
                                <th>Job 5</th> <th>Job 6</th> <th>Job 7</th>
                                <th>Belum</th>
                                <th class="table-primary">Akhir</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="10" class="text-center py-5">
                                    <div class="spinner-border text-primary spinner-border-sm me-2"></div>
                                    <span id="loadingIndicator text-muted">Memuat data nilai...</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="mt-4 d-flex justify-content-between align-items-center">
                    <small class="text-muted">*Data diperbarui secara otomatis dari Google Sheets.</small>
                    <button id="refreshDataBtn" class="btn btn-outline-primary btn-sm shadow-sm">
                        <i class="fas fa-sync-alt me-1"></i> Refresh Data Master
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="content-materi" class="feature-content" style="display:none;">
        <div class="card card-outline card-success">
            <div class="card-header"><i class="fas fa-book me-2 text-success"></i> Dokumen Materi Pelajaran</div>
            <div class="card-body">
                <ul id="materi-list" class="list-group list-group-flush">
                    </ul>
            </div>
        </div>
    </div>
    
    <div id="content-video" class="feature-content" style="display:none;">
        <div class="card card-outline card-warning">
            <div class="card-header"><i class="fas fa-video me-2 text-warning"></i> Koleksi Video Pembelajaran</div>
            <div class="card-body">
                <div class="row" id="video-list">
                    </div>
            </div>
        </div>
    </div>

    <div id="content-soal" class="feature-content" style="display:none;">
        <div class="card card-outline card-danger">
            <div class="card-header"><i class="fas fa-edit me-2 text-danger"></i> Latihan Soal & Kuis Mandiri</div>
            <div class="card-body">
                <ul id="soal-list" class="list-group list-group-flush">
                    </ul>
            </div>
        </div>
    </div>

</main>

<footer class="text-center">
    <div class="container small text-muted">
        Portal Pembelajaran &bull; Pak Guru Sigit Prabowo
    </div>
</footer>

<script src="nilai.js"></script>

</body>
</html>
